# Isovalent SRv6 SID Locator Pool Manager

SRv6 SID Locator Pool Manager manages cluster wide locator pool allocations. It consumes IsovalentSRv6LocatorPool CRDs, which
defines locator prefix and SID structure. Based on number of nodes in the cluster, node specific CRDs are generated by 
Locator Pool Manager.

## Usage

SID Locator Pool Manager is enabled by setting this flag
```
  --srv6-locator-pool-enabled=true
```

Corresponding helm values can be specified as following.

```
enterprise:
  srv6:
    locatorPoolEnabled: true
```

When set to true, Locator Pool Manager will start listening to IsovalentSRv6LocatorPool and Node resources.

### IsovalentSRv6LocatorPool CRD

Locator pool resource can be defined as following :

```yaml
---
apiVersion: isovalent.com/v1alpha1
kind: IsovalentSRv6LocatorPool
metadata:
  name: pool1
spec:
  prefix: fd00:0:1::/48
  structure:
    locatorBlockLenBits: 40
    locatorNodeLenBits: 24
    functionLenBits: 16
    argumentLenBits: 0
```

#### Prefix
This is SRv6 locator block prefix, with following constraints
- It must be unique across all pools
- Prefix length must be byte aligned. (i.e. 8, 16, 24, 32, 40, 48, 56, 64... )

#### Structure
This is SRv6 SID structure, with following constraints
- Locator length (Block + Node) must be greater than prefix length.
- All fields must be byte aligned.
- SID values L + F + A <= 128

Locator Pool Manager listens on this resource and node resources. On receiving new IsovalentSRv6LocatorPool, it will 
generate IsovalentSRv6SIDManager resource per node.
